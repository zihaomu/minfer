<mxfile host="Electron" modified="2024-01-25T08:13:20.376Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.1.2 Chrome/114.0.5735.289 Electron/25.9.4 Safari/537.36" etag="xmqcBT4pVS0dnRj0FXHZ" version="22.1.2" type="device" pages="2">
  <diagram name="Page-1" id="PYth0N5b3VRkkzfZoHOw">
    <mxGraphModel dx="3462" dy="2888" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="-lFWspFVWWiz-ORdHb-8-1" value="&lt;h1&gt;muinfer&lt;/h1&gt;&lt;p&gt;muinfer is an inference engine which focus on llm.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-790" y="-230" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-4" value="Fileloader&lt;br&gt;(llm model is quite big, load all param to memory once, or one by one)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=100;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-150" y="1365" width="140" height="190" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-5" value="Item 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-4" vertex="1">
          <mxGeometry y="100" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-6" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-4" vertex="1">
          <mxGeometry y="130" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-7" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-4" vertex="1">
          <mxGeometry y="160" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-8" value="MemoryAlloc &lt;br&gt;(Try to reuse the alloced memory)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="1380" width="140" height="150" as="geometry">
            <mxRectangle x="15" y="1300" width="110" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-9" value="p* alloc()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-8" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-10" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-8" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-11" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-8" vertex="1">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-12" value="Autobuffer&amp;lt;T&amp;gt;&lt;br&gt;(cpu Buffer for different data type)&lt;br&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=70;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="1380" width="140" height="160" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-13" value="p* alloc(size, align_sz)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-12" vertex="1">
          <mxGeometry y="70" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-14" value="free(p*)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-12" vertex="1">
          <mxGeometry y="100" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-15" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-12" vertex="1">
          <mxGeometry y="130" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-17" value="TickerCunter" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="1390" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-18" value="reset()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-17" vertex="1">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-19" value="start()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-17" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-20" value="stop(), and some get time func" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-17" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-lFWspFVWWiz-ORdHb-8-22" target="-lFWspFVWWiz-ORdHb-8-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-lFWspFVWWiz-ORdHb-8-22" target="-lFWspFVWWiz-ORdHb-8-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-22" value="MallocFunc&lt;br&gt;(fast malloc take into account)&lt;br&gt;" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="1660" width="140" height="150" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-23" value="p* Malloc(size, align_sz)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-22" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-24" value="void free(size, align_sz)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-22" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-25" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-22" vertex="1">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-29" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-837" y="740" as="sourcePoint" />
            <mxPoint x="1686.6363636363637" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-30" value="" style="endArrow=none;dashed=1;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-510" y="1320" as="sourcePoint" />
            <mxPoint x="1630" y="1320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-32" value="Basic class" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-280" y="1445" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-33" value="Tensor&lt;br&gt;(Tensor API)&amp;nbsp;delete all the copy function" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-410" y="810" width="300" height="400" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-59" value="enum memoryType" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="40" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-48" value="Tensor() # not alloc, just create handle" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="70" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-47" value="Tensor(tensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="100" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-72" value="Tensor()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="130" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-71" value="copyTo, clone for deep copy" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="160" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-46" value="~Tenosr()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="190" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-44" value="createDevice(shape_vec, type, data type)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="220" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-54" value="copyToDeviceTensor # gpu memory?" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="250" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-53" value="copyToHostTensor" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="280" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-52" value="fundamental function:&amp;nbsp; shape, size, dimension, width, height, channle, batch, print and print shape." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="310" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-51" value="p* data; vec shape[]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="340" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-65" value="p* data for device" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-33" vertex="1">
          <mxGeometry y="370" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-40" value="Backend" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="780" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-41" value="Tensor createTensor();" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-40" vertex="1">
          <mxGeometry y="50" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-42" value="Op createOp()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-40" vertex="1">
          <mxGeometry y="80" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-43" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-40" vertex="1">
          <mxGeometry y="110" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-56" value="There are three type memory:&amp;nbsp;&lt;br&gt;Device only&lt;br&gt;Host only&lt;br&gt;Host_Device" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-680" y="1000" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-60" value="Basic Tensor compute&lt;br&gt;(Need support device and host)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-810" y="1100" width="140" height="180" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-61" value="add" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-60" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-62" value="subtract" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-60" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-63" value="multiply" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-60" vertex="1">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-64" value="div" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-60" vertex="1">
          <mxGeometry y="150" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-69" value="&lt;font color=&quot;#ff4538&quot;&gt;Question: How to deal with different type of Device?&lt;br&gt;One solution, Device Tensor can only be created by Device Backend.&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-650" y="1145" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-70" value="&lt;font color=&quot;#ff4538&quot;&gt;Question: Reuse memeory or resue tensor?&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-70" y="1580" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-73" value="BackendCPU&lt;br&gt;是否需要？" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-40" y="1070" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-74" value="Tensor createDeviceTensor(shape_vec, datatype)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-73" vertex="1">
          <mxGeometry y="50" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-75" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-73" vertex="1">
          <mxGeometry y="80" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-76" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-73" vertex="1">
          <mxGeometry y="110" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-77" value="BackendGPU&lt;br&gt;(管理gpu memory，处理运行流程)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="370" y="1070" width="330" height="140" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-78" value="Tensor createDeviceTensor(shape_vec, datatype)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-77" vertex="1">
          <mxGeometry y="50" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-79" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-77" vertex="1">
          <mxGeometry y="80" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-80" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-77" vertex="1">
          <mxGeometry y="110" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-lFWspFVWWiz-ORdHb-8-83" target="-lFWspFVWWiz-ORdHb-8-141" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-83" value="CPUOp&lt;br&gt;(Op get input and give output)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="730" y="770" width="330" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-84" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-83" vertex="1">
          <mxGeometry y="50" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-85" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-83" vertex="1">
          <mxGeometry y="80" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-87" value="SoftmaxOp" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="727" y="930" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-88" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-87" vertex="1">
          <mxGeometry y="50" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-89" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-87" vertex="1">
          <mxGeometry y="80" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-90" value="ConvOp" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1070" y="930" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-91" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-90" vertex="1">
          <mxGeometry y="50" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-92" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-90" vertex="1">
          <mxGeometry y="80" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.456;entryY=0.991;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-73" target="-lFWspFVWWiz-ORdHb-8-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.459;entryY=1.026;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-77" target="-lFWspFVWWiz-ORdHb-8-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.48;entryY=0.991;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-87" target="-lFWspFVWWiz-ORdHb-8-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.477;entryY=1.026;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-90" target="-lFWspFVWWiz-ORdHb-8-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-99" value="Net" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="118" width="360" height="150" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-100" value="Net()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-99" vertex="1">
          <mxGeometry y="30" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-101" value="forward()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-99" vertex="1">
          <mxGeometry y="60" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-102" value="setBackend()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-99" vertex="1">
          <mxGeometry y="90" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-110" value="setThreadNum()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-99" vertex="1">
          <mxGeometry y="120" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-103" value="NetImpl" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="340" width="360" height="210" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-104" value="BackendMap&amp;lt;int, BackendDevice&amp;gt; Backends;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="30" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-105" value="OpList" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="60" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-106" value="inputTensor, outputTensor" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="90" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-109" value="TensorAlloc" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="120" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-108" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="150" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-107" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-103" vertex="1">
          <mxGeometry y="180" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="-lFWspFVWWiz-ORdHb-8-106" target="-lFWspFVWWiz-ORdHb-8-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-117" value="Torkenizer" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="920" y="470" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-118" value="encode" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-117" vertex="1">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-119" value="decode" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-117" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-120" value="loadmode" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-117" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-126" value="TensorAllocater" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="460" width="140" height="150" as="geometry">
            <mxRectangle x="15" y="1300" width="110" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-127" value="Tensor alloc" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-126" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-128" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-126" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-129" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-126" vertex="1">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-109" target="-lFWspFVWWiz-ORdHb-8-126" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-131" value="&lt;font color=&quot;#ff4538&quot;&gt;Op 和Backend 之间肯定有耦合，其中Op需要Backend中的一些资源才能运行&lt;br&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="795" y="1140" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-145" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-132" target="-lFWspFVWWiz-ORdHb-8-141" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-132" value="GPUOp&lt;br&gt;(Op get input and give output)" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1350" y="790" width="330" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-133" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-132" vertex="1">
          <mxGeometry y="50" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-134" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-132" vertex="1">
          <mxGeometry y="80" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-136" value="ConvOp" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1490" y="940" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-137" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-136" vertex="1">
          <mxGeometry y="50" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-138" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-136" vertex="1">
          <mxGeometry y="80" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-147" value="GPUBackend" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-136" vertex="1">
          <mxGeometry y="110" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.497;entryY=0.967;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="-lFWspFVWWiz-ORdHb-8-136" target="-lFWspFVWWiz-ORdHb-8-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-140" value="Op" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=50;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1120" y="620" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-141" value="Op()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-140" vertex="1">
          <mxGeometry y="50" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-142" value="forward(input, output);" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-140" vertex="1">
          <mxGeometry y="80" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-149" value="Net 的forward逻辑&lt;br&gt;forward-&amp;gt; netImpl-&amp;gt;forward-&amp;gt;opList forward-&amp;gt; layer by layer-&amp;gt; 怎么样并行的在gpu和cpu上运行？&lt;br&gt;没有 sublayer一层，缺少整体调优。&lt;br&gt;其中Op是基础的抽象，具体forward是具体执行层面的Tensor，而Tensor是具体设备数据的抽象。怎么联合多平台上去做整体优化？怎么在具体平台做特定优化？" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="410" y="240" width="520" height="100" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-150" value="subnet" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="515" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-151" value="Item 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-150" vertex="1">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-152" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-150" vertex="1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-lFWspFVWWiz-ORdHb-8-153" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="-lFWspFVWWiz-ORdHb-8-150" vertex="1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-uV3R9PkaawRIveW8noT-1" value="runtime&lt;br&gt;单例模式，全局只有一个，用来管理设备和内存释放" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=60;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="610" width="140" height="150" as="geometry" />
        </mxCell>
        <mxCell id="-uV3R9PkaawRIveW8noT-2" value="Item 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="-uV3R9PkaawRIveW8noT-1">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-uV3R9PkaawRIveW8noT-3" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="-uV3R9PkaawRIveW8noT-1">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-uV3R9PkaawRIveW8noT-4" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="-uV3R9PkaawRIveW8noT-1">
          <mxGeometry y="120" width="140" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="fqZO5K2zUHzQrToZ2A36" name="Page-2">
    <mxGraphModel dx="2386" dy="2214" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="zIo-u8ahMzrewcG6ipVP-1" value="&lt;h1&gt;minfer&lt;/h1&gt;&lt;p&gt;minfer以Net-&amp;gt;NetImpl-&amp;gt;Layer为主&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-120" y="30" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-2" value="Net" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="330" y="123" width="240" height="150" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-3" value="createLayer(LayerParam)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-2">
          <mxGeometry y="30" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-4" value="init()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-2">
          <mxGeometry y="60" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-70" value="forward()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-2">
          <mxGeometry y="90" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-5" value="netImpl" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-2">
          <mxGeometry y="120" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-6" value="NetImpl" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="330" y="340" width="190" height="150" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-7" value="createLayer(LayerParam)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-6">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-9" value="session" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-6">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-8" value="tensor list: Tensor*" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-6">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-36" value="layer list: Layer*" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-6">
          <mxGeometry y="120" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-10" value="SubNet？简化流程，不需要" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="600" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-11" value="Item 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-10">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-12" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-10">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-13" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-10">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-14" value="Layer" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="510" y="539" width="220" height="210" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-15" value="init(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-16" value="forward(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="60" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-17" value="netLayerIndex,&amp;nbsp; 用来索引DAG" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="90" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-54" value="intputTensor" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="120" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-55" value="outputTensor" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="150" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-56" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry y="180" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-18" value="Backend" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1020" y="240" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-19" value="createLayer()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-18">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-20" value="createTensor()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-18">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-21" value="checkLayerSupport" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-18">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-22" value="Session" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="340" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-23" value="Item 1" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-22">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-24" value="Item 2" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-22">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-25" value="registed backend" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="zIo-u8ahMzrewcG6ipVP-22">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="zIo-u8ahMzrewcG6ipVP-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zIo-u8ahMzrewcG6ipVP-9" target="zIo-u8ahMzrewcG6ipVP-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-1" value="Tensor&lt;br&gt;(Tensor API)&amp;nbsp;delete all the copy function" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=40;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-78" y="517" width="300" height="400" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-2" value="enum memoryType" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="40" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-3" value="Tensor() # not alloc, just create handle" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="70" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-4" value="Tensor(tensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="100" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-5" value="Tensor()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="130" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-6" value="copyTo, clone for deep copy" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="160" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-7" value="~Tenosr()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="190" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-8" value="createDevice(shape_vec, type, data type)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="220" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-9" value="copyToDeviceTensor # gpu memory?" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="250" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-10" value="copyToHostTensor" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="280" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-11" value="fundamental function:&amp;nbsp; shape, size, dimension, width, height, channle, batch, print and print shape." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="310" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-12" value="p* data; vec shape[]" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="340" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-13" value="p* data for device" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-1">
          <mxGeometry y="370" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-14" target="zIo-u8ahMzrewcG6ipVP-18">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1085" y="359" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-14" value="CPUBackend" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="409" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-15" value="createLayer()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-14">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-16" value="createTensor()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-14">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-17" value="cpu resource" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-14">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-18" target="zIo-u8ahMzrewcG6ipVP-18">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1085" y="359" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-18" value="GPUBackend" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="409" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-19" value="createLayer()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-18">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-20" value="createTensor()" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-18">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-21" value="gpu resource" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-18">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-29" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="860" y="400" width="430" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zIo-u8ahMzrewcG6ipVP-25" target="Ed7WfostYDbFaU3545gA-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zIo-u8ahMzrewcG6ipVP-5" target="zIo-u8ahMzrewcG6ipVP-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-41" value="createTensor 流程：&lt;br&gt;Backend-&amp;gt;createTensor只会在layer初始化过程调用，" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1180" y="80" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-42" value="createLayer 流程:&lt;br&gt;Backend-&amp;gt;checkSupport&lt;br&gt;然后Backend-&amp;gt;createLayer()&lt;br&gt;还要查询所有输入layer的Tensor是否创建好了。&lt;br&gt;内部逻辑：要先保证input layer已经创建了，获取所有input layer的output tensor作为当前的input，这个信息保存在LayerParam中。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1180" y="200" width="240" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-43" value="&lt;font color=&quot;#ff7a21&quot;&gt;tensor实际的创建和释放在哪？&lt;br&gt;&lt;br&gt;layer的前后链接在哪？&lt;br&gt;是否已经转换成了tensor 的index？ Param中包含输入和输出的Tensor index，在开始创建Layer之前，需要准备好所有的Tensor。Params包函输入输出Tensor，这种链接就是Layer的前后链接。同时，每个Layer也需要知道谁是他的输入和输出。怎么样知道Tensor的消费者有多少个？所以每个Layer还需要保存其输出layer的id才能构成图。&lt;br&gt;&lt;br&gt;如何兼容多backend？&lt;br&gt;创建Layer时，如果Tensor是cpu，但是layer是gpu，这种情况就需要将Tensor升级为cpu-gpu tensor&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="960" y="720" width="400" height="160" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-45" value="Tensor要增加从cputensor扩展到devicetensor的能力，从而完成转换。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-130" y="466" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-50" target="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-50" value="CPULayer" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="820" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-51" value="init(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-50">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-52" value="forward(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-50">
          <mxGeometry y="60" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-53" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-50">
          <mxGeometry y="90" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-58" target="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-58" value="GPULayer" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="820" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-59" value="init(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-58">
          <mxGeometry y="30" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-60" value="forward(iTensor, oTensor)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-58">
          <mxGeometry y="60" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-61" value="Item 3" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="Ed7WfostYDbFaU3545gA-58">
          <mxGeometry y="90" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-36" target="zIo-u8ahMzrewcG6ipVP-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-67" value="&lt;font color=&quot;#ff7a21&quot;&gt;先不考虑多层联合优化的问题：&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="270" y="-130" width="400" height="160" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-68" value="init阶段才会真正的分配内存，create阶段只是将图构建起来。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="670" y="80" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="zIo-u8ahMzrewcG6ipVP-4" target="Ed7WfostYDbFaU3545gA-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-71" value="forward构建图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;labelBorderColor=none;" vertex="1" parent="1">
          <mxGeometry x="700" y="213" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="Ed7WfostYDbFaU3545gA-70" target="Ed7WfostYDbFaU3545gA-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Ed7WfostYDbFaU3545gA-74" value="&lt;font color=&quot;#ff7a21&quot;&gt;Tensor 内存复用需要引入RefCount，从而保证后面运行Tensor需要的内存能够在前面已经正确获取的Tensor中获得。多device情况需要额外加上device统一性的判断。&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="100" y="1020" width="400" height="160" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
